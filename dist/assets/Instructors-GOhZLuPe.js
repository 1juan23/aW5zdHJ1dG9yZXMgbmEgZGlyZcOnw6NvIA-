import{j as e}from"./supabase-vendor-zrCfvSZu.js";import{f as _,g as $,H as A,B as h,C as M,c as O,e as U,h as P,F as X}from"./index-CcM7G_HG.js";import{I as G}from"./input-CCzeZ9h-.js";import{S as p,a as f,b as j,c as g,d as N}from"./select-481qhC-1.js";import{S as J}from"./slider-CuyF1RFO.js";import{j as K,r as a,u as Q,H as W,L as Y}from"./react-vendor-C2tQq_zP.js";import{P as Z}from"./PlanBadge-Bd_yppv9.js";import{F as ee}from"./FavoriteButton-BENyxh-m.js";import{V as se}from"./VIPBadge-B08KXLNE.js";import{m as R,z as ae,X as te,L as le,q as re,k as ie,p as ne}from"./ui-vendor-D-xBSbyO.js";import"./index-BdQq_4o_.js";import"./index-CVM1siHy.js";const oe=["Todos","Iniciante","Medo de dirigir","Reciclagem","Habilitados","Primeira habilitação","Baliza","Estrada","Defensiva"],ce=["Todas","4.5+","4.0+","3.5+","3.0+"];function be(){const[q]=K(),B=q.get("cidade")||"",[n,v]=a.useState(B),[o,w]=a.useState("Todos"),[c,b]=a.useState("Todas"),[d,C]=a.useState("Todas"),[l,y]=a.useState([30,200]),[S,V]=a.useState(!1),{data:r,isLoading:T}=_(),{isAuthenticated:F}=$(),z=Q(),D=(s,t)=>{F||(s.preventDefault(),z("/login"))},E=a.useMemo(()=>r?["Todas",...[...new Set(r.map(t=>t.city))].sort()]:["Todas"],[r]),m=a.useMemo(()=>r?r.filter(s=>{const t=s.name.toLowerCase().includes(n.toLowerCase())||s.city.toLowerCase().includes(n.toLowerCase()),x=o==="Todos"||(s.specialties||[]).some(u=>u.toLowerCase()===o.toLowerCase()),i=c==="Todas"||s.city===c,I=s.price||0,H=I>=l[0]&&I<=l[1];let L=!0;if(d!=="Todas"){const u=parseFloat(d.replace("+",""));L=(s.rating||0)>=u}return t&&x&&i&&H&&L}):[],[r,n,o,c,l,d]),k=()=>{v(""),w("Todos"),b("Todas"),C("Todas"),y([30,200])};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{children:[e.jsx("title",{children:"Encontre Instrutores de Direção | Instrutores na Direção"}),e.jsx("meta",{name:"description",content:"Busque e compare instrutores de direção qualificados na sua cidade. Filtros por preço, disponibilidade e especialidade."})]}),e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(A,{}),e.jsxs("main",{className:"flex-1",children:[e.jsx("section",{className:"gradient-hero py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-foreground mb-4",children:"Encontre seu instrutor"}),e.jsx("p",{className:"text-primary-foreground/80 mb-8 max-w-2xl",children:"Pesquise entre centenas de profissionais qualificados e encontre o ideal para você."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 max-w-2xl",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(R,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(G,{type:"text",placeholder:"Buscar por nome ou cidade...",value:n,onChange:s=>v(s.target.value),className:"pl-12 h-12 bg-card border-0"})]}),e.jsxs(h,{variant:"hero",size:"lg",className:"gap-2",onClick:()=>V(!S),children:[e.jsx(ae,{className:"h-5 w-5"}),"Filtros"]})]})]})}),S&&e.jsx("section",{className:"bg-card border-b py-6 animate-fade-in",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-wrap gap-6 items-end",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Categoria"}),e.jsxs(p,{value:o,onValueChange:w,children:[e.jsx(f,{className:"w-full sm:w-[180px]",children:e.jsx(j,{})}),e.jsx(g,{children:oe.map(s=>e.jsx(N,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cidade"}),e.jsxs(p,{value:c,onValueChange:b,children:[e.jsx(f,{className:"w-full sm:w-[180px]",children:e.jsx(j,{})}),e.jsx(g,{children:E.map(s=>e.jsx(N,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Avaliação"}),e.jsxs(p,{value:d,onValueChange:C,children:[e.jsx(f,{className:"w-full sm:w-[140px]",children:e.jsx(j,{})}),e.jsx(g,{children:ce.map(s=>e.jsx(N,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground mb-2 block",children:["Preço: R$ ",l[0]," - R$ ",l[1]]}),e.jsx(J,{value:l,onValueChange:y,min:30,max:200,step:5,className:"w-full"})]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:k,className:"gap-1",children:[e.jsx(te,{className:"h-4 w-4"}),"Limpar"]})]})})}),e.jsx("section",{className:"py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[T&&e.jsx("div",{className:"flex justify-center py-16",children:e.jsx(le,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!T&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-muted-foreground mb-6",children:[m.length," instrutor(es) encontrado(s)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>{const t=s.plan_type==="elite",x=s.plan_type==="destaque";return e.jsx(Y,{to:`/instrutor/${s.id}`,onClick:i=>D(i,s.id),children:e.jsx(M,{variant:"interactive",className:O("h-full transition-all duration-300",t&&"ring-2 ring-amber-400 shadow-lg shadow-amber-400/20 bg-gradient-to-br from-amber-50/5 to-transparent",x&&"ring-2 ring-primary shadow-lg shadow-primary/20 bg-gradient-to-br from-primary/5 to-transparent"),children:e.jsxs(U,{className:"p-0",children:[e.jsxs("div",{className:"flex gap-4 p-4",children:[e.jsx("img",{src:s.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.name)}&size=96`,alt:s.name,className:"w-24 h-24 rounded-xl object-cover flex-shrink-0 bg-muted"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"font-semibold text-foreground truncate",children:s.name}),t&&e.jsx(se,{planType:"elite",size:"sm"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{instructorId:s.id}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[e.jsx(Z,{planType:s.plan_type}),e.jsxs(P,{variant:"default",className:"bg-accent text-accent-foreground flex-shrink-0",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Disponível"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.city,", ",s.state]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[e.jsx(ne,{className:"h-4 w-4 fill-warning text-warning"}),e.jsx("span",{className:"font-medium",children:s.rating||0}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.total_reviews||0,")"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:s.bio||"Instrutor de direção qualificado"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 pt-0 border-t mt-4",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:(s.specialties||[]).slice(0,2).map(i=>e.jsx(P,{variant:"outline",className:"text-xs",children:i},i))}),e.jsx("div",{className:"text-right",children:F?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"A partir de"}),e.jsxs("p",{className:"font-bold text-foreground",children:["R$ ",s.price||0,e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/aula"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Preço"}),e.jsx("p",{className:"text-sm font-medium text-primary",children:"Faça login para ver"})]})})]})]})})},s.id)})}),m.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:e.jsx(R,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Nenhum instrutor encontrado"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Tente ajustar os filtros para ver mais resultados."}),e.jsx(h,{variant:"outline",onClick:k,children:"Limpar filtros"})]})]})]})})]}),e.jsx(X,{})]})]})}export{be as default};
