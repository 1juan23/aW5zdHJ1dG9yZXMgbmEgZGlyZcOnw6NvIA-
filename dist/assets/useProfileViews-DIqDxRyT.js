import{u}from"./supabase-vendor-zrCfvSZu.js";import{s as a}from"./index-CcM7G_HG.js";function y(e){return u({queryKey:["profile-views",e],queryFn:async()=>{if(!e)throw new Error("No instructor ID");const t=new Date,o=new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString(),i=new Date(t.getTime()-10080*60*1e3).toISOString(),s=new Date(t.getTime()-720*60*60*1e3).toISOString(),{count:n}=await a.from("profile_views").select("*",{count:"exact",head:!0}).eq("instructor_id",e),{count:r}=await a.from("profile_views").select("*",{count:"exact",head:!0}).eq("instructor_id",e).gte("viewed_at",i),{count:w}=await a.from("profile_views").select("*",{count:"exact",head:!0}).eq("instructor_id",e).gte("viewed_at",s),{count:c}=await a.from("profile_views").select("*",{count:"exact",head:!0}).eq("instructor_id",e).gte("viewed_at",o);return{totalViews:n||0,last7Days:r||0,last30Days:w||0,todayViews:c||0}},enabled:!!e})}async function _(e){const{data:{user:t}}=await a.auth.getUser();await a.from("profile_views").insert({instructor_id:e,viewer_id:(t==null?void 0:t.id)||null})}export{_ as l,y as u};
